{"version":3,"file":"antd-weekly-calendar.esm.js","sources":["../src/components/utils.ts","../src/components/CalendarBody.tsx","../src/components/DatePicker.tsx","../src/components/CalendarHeader.tsx","../src/components/WeeklyCalendar.tsx"],"sourcesContent":["import {\n  add,\n  isSameHour,\n  isSameDay,\n  addHours,\n  eachDayOfInterval,\n  startOfDay,\n  getDay,\n  isSameWeek,\n  startOfWeek,\n  format,\n  differenceInMinutes,\n} from 'date-fns';\n\nimport {\n  WeekObject,\n  EventsObject,\n  GetWeekDates,\n  GenericEvent,\n  DayName,\n} from './types';\n\nexport const daysToWeekObject = <T extends GenericEvent>(\n  events: T[],\n  startWeek: Date\n) => {\n  const dayNames: DayName[] = [\n    'sunday',\n    'monday',\n    'tuesday',\n    'wednesday',\n    'thursday',\n    'friday',\n    'saturday',\n  ];\n\n  const weekObject: WeekObject<T> = {\n    sunday: [],\n    monday: [],\n    tuesday: [],\n    wednesday: [],\n    thursday: [],\n    friday: [],\n    saturday: [],\n  };\n\n  if (events == null) {\n    return weekObject;\n  }\n\n  for (const googleEventIndex in events) {\n    const eventStartTimeDay = events[googleEventIndex].startTime;\n    const eventEndTimeDay = events[googleEventIndex].endTime;\n\n    if (!isSameDay(eventStartTimeDay, eventEndTimeDay)) {\n      const result = eachDayOfInterval({\n        start: eventStartTimeDay,\n        end: eventEndTimeDay,\n      });\n      for (const dayInterval in result) {\n        const splitedEvent = { ...events[googleEventIndex] };\n        splitedEvent.startTime = result[dayInterval];\n        splitedEvent.endTime = result[dayInterval];\n        const weekObjectKey: DayName =\n          dayNames[getDay(new Date(result[dayInterval]))];\n        isSameWeek(startWeek, splitedEvent.startTime) &&\n          weekObject[weekObjectKey].push(splitedEvent);\n      }\n    } else {\n      const weekObjectKey: DayName = dayNames[getDay(eventStartTimeDay)];\n      weekObject[weekObjectKey].push(events[googleEventIndex]);\n    }\n  }\n\n  return weekObject;\n};\n\nexport const getDayHoursEvents = <T extends GenericEvent>(\n  value: GetWeekDates,\n  weekObject: WeekObject<T> | undefined\n) => {\n  const ALL_DAY_EVENT = 0;\n  const events: EventsObject<T>[] = [];\n  for (let i = 0; i < 26; i++) {\n    const startDate = add(startOfDay(startOfWeek(value.startDate)), {\n      days: 1,\n    });\n    const hour = addHours(startDate, i - 1);\n\n    events.push({\n      id: i,\n      hourObject: hour,\n      hour: i != ALL_DAY_EVENT ? format(hour, 'hh a') : 'all-day',\n      Monday:\n        weekObject?.monday &&\n        weekObject?.monday.filter(e => {\n          return e.allDay ? i === ALL_DAY_EVENT : isSameHour(e.startTime, hour);\n        }),\n      Tuesday:\n        weekObject?.tuesday &&\n        weekObject?.tuesday.filter(e => {\n          return e.allDay\n            ? i === ALL_DAY_EVENT\n            : isSameHour(e.startTime, add(hour, { days: 1 }));\n        }),\n      Wednesday:\n        weekObject?.wednesday &&\n        weekObject?.wednesday.filter(e => {\n          return e.allDay\n            ? i === ALL_DAY_EVENT\n            : isSameHour(e.startTime, add(hour, { days: 2 }));\n        }),\n      Thursday:\n        weekObject?.thursday &&\n        weekObject?.thursday.filter(e => {\n          return e.allDay\n            ? i === ALL_DAY_EVENT\n            : isSameHour(e.startTime, add(hour, { days: 3 }));\n        }),\n      Friday:\n        weekObject?.friday &&\n        weekObject?.friday.filter(e => {\n          return e.allDay\n            ? i === ALL_DAY_EVENT\n            : isSameHour(e.startTime, add(hour, { days: 4 }));\n        }),\n      Saturday:\n        weekObject?.saturday &&\n        weekObject?.saturday.filter(e => {\n          return e.allDay\n            ? i === ALL_DAY_EVENT\n            : isSameHour(e.startTime, add(hour, { days: 5 }));\n        }),\n      Sunday:\n        weekObject?.sunday &&\n        weekObject?.sunday.filter(e => {\n          return e.allDay\n            ? i === ALL_DAY_EVENT\n            : isSameHour(e.startTime, add(hour, { days: 6 }));\n        }),\n    });\n  }\n\n  return events;\n};\n\nconst HOUR_TO_DECIMAL = 1.666666667;\nexport const MIN_BOX_SIZE = 40;\n\nexport const sizeEventBox = <T extends GenericEvent>(event: T, hour: Date) => {\n  const eventStartTime = new Date(event.startTime);\n  const eventEndTime = new Date(event.endTime);\n  const boxSize =\n    Math.floor(\n      differenceInMinutes(eventEndTime, eventStartTime) * HOUR_TO_DECIMAL\n    ) < MIN_BOX_SIZE\n      ? MIN_BOX_SIZE\n      : Math.floor(\n          differenceInMinutes(eventEndTime, eventStartTime) * HOUR_TO_DECIMAL\n        );\n  const boxPosition =\n    differenceInMinutes(hour, eventStartTime) * HOUR_TO_DECIMAL > 100\n      ? 0\n      : differenceInMinutes(eventStartTime, hour) * HOUR_TO_DECIMAL;\n\n  return { boxPosition: boxPosition, boxSize: boxSize };\n};\n","import React, { useEffect, useRef } from 'react';\nimport { add, format, getDay, setDay, differenceInMinutes } from 'date-fns';\nimport { Table } from 'antd';\n\nimport {\n  GenericEvent,\n  CalendarBodyProps,\n  EventsObject,\n  EventBlockProps,\n  ColumnNode,\n} from './types';\nimport { getDayHoursEvents, sizeEventBox, MIN_BOX_SIZE } from './utils';\n\nconst BOX_POSITION_OFFSET = 26;\nconst SCROLL_TO_ROW = 19;\nconst TURQUOISE = '#36CFC9';\nconst ALL_DAY_ROW = 0;\n\nconst EventBlock = <T extends GenericEvent>({\n  event,\n  index,\n  hour,\n  events,\n  onEventClick,\n}: EventBlockProps<T>) => {\n  const getEventDay = getDay(new Date(event.endTime));\n  const fitHourToDate = setDay(hour, getEventDay);\n\n  const boxStyle = event.allDay\n    ? { boxSize: MIN_BOX_SIZE, boxPosition: index * BOX_POSITION_OFFSET }\n    : sizeEventBox(event, fitHourToDate);\n  const boxLeftPosition = event.allDay ? 0 : BOX_POSITION_OFFSET * index;\n\n  return (\n    <div\n      style={{\n        display:\n          !event.allDay &&\n          differenceInMinutes(new Date(event.endTime), fitHourToDate) === 0\n            ? 'none'\n            : 'block',\n        height: boxStyle.boxSize + '%',\n        width: event.allDay ? 80 + '%' : 80 / events + '%',\n        position: 'absolute',\n        top: boxStyle.boxPosition + '%',\n        left: boxLeftPosition + '%',\n        borderColor: 'white',\n        borderStyle: 'solid',\n        borderWidth: '0.01rem',\n        borderRadius: '5px',\n        backgroundColor: event.backgroundColor\n          ? event.backgroundColor\n          : TURQUOISE,\n        zIndex: 1,\n      }}\n      onClick={onEventClick ? () => onEventClick(event) : undefined}\n      key={index}\n    >\n      <p style={{ color: 'white', fontSize: '12px', paddingLeft: '5px' }}>\n        {event.title}\n      </p>\n    </div>\n  );\n};\n\nfunction Calendar<T extends GenericEvent>({\n  weekDates,\n  getDayEvents,\n  onEventClick,\n  weekends,\n}: CalendarBodyProps<T>) {\n  const rowRef = useRef<null | HTMLDivElement>(null);\n  useEffect(() => {\n    if (rowRef.current) {\n      rowRef.current?.scrollIntoView();\n    }\n  }, [rowRef]);\n\n  const dayList = weekends\n    ? [\n        'Monday',\n        'Tuesday',\n        'Wednesday',\n        'Thursday',\n        'Friday',\n        'Saturday',\n        'Sunday',\n      ]\n    : ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\n\n  const dayColumns = dayList.map((day, counter) => {\n    const columnDate = add(new Date(weekDates.startDate), {\n      days: 1 + counter,\n    });\n    const formattedDayandMonth =\n      format(columnDate, 'iii') + ' ' + format(columnDate, 'dd');\n    return {\n      title: formattedDayandMonth,\n      dataIndex: day,\n      key: day,\n      width: 2,\n      render: function(\n        events: ColumnNode<T>,\n        row: EventsObject<T>\n      ): React.ReactNode | undefined {\n        if (events && events.length > 0 && events instanceof Array) {\n          const eventsBlock = events.map(function(\n            event,\n            index: number\n          ): React.ReactNode {\n            return (\n              <EventBlock\n                key={event.eventId}\n                event={event}\n                index={index}\n                hour={row.hourObject}\n                events={events.length}\n                onEventClick={onEventClick}\n              />\n            );\n          });\n\n          return {\n            props: {\n              style: { position: 'relative', padding: '0' },\n            },\n            children: <>{eventsBlock}</>,\n          };\n        }\n        return undefined;\n      },\n    };\n  });\n  const hourColumn = {\n    title: 'Hours',\n    dataIndex: 'hour',\n    key: 'hour',\n    width: 1,\n    render: (hour: ColumnNode<T>, {}, id: number) => {\n      return {\n        props: {\n          style: { width: '10%' },\n        },\n        children:\n          SCROLL_TO_ROW === id ? (\n            <div ref={rowRef}>{hour}</div>\n          ) : (\n            <div>{hour}</div>\n          ),\n      };\n    },\n  };\n  const tableColumns = [hourColumn, ...dayColumns];\n\n  return (\n    <div>\n      <Table\n        rowKey={record => record.id}\n        dataSource={getDayHoursEvents(weekDates, getDayEvents)}\n        columns={tableColumns}\n        pagination={false}\n        bordered={true}\n        showHeader={true}\n        onRow={(_, rowIndex) => {\n          if (rowIndex === ALL_DAY_ROW) {\n            return {\n              style: {\n                backgroundColor: 'white',\n                position: 'sticky',\n                boxShadow: 'rgba(0, 0, 0, 0.05) -1px 4px 4px ',\n                zIndex: 1,\n                top: 0,\n              },\n            };\n          }\n          return {};\n        }}\n        scroll={{\n          y: 1000,\n        }}\n      />\n    </div>\n  );\n}\n\nexport default Calendar;\n","import dateFnsGenerateConfig from \"rc-picker/lib/generate/dateFns\";\nimport generatePicker from \"antd/es/date-picker/generatePicker\";\nimport \"antd/es/date-picker/style/index\";\n\nexport const DatePicker = generatePicker<Date>(dateFnsGenerateConfig);\n\nexport default DatePicker;\n","import React from 'react';\nimport { Button, Row, Col, Tag, Typography } from 'antd';\nimport { LeftOutlined, RightOutlined } from '@ant-design/icons';\nimport {\n  addWeeks,\n  startOfWeek,\n  endOfWeek,\n  getMonth,\n  format,\n  getWeek,\n} from 'date-fns';\n\nimport DatePicker from './DatePicker';\n\nimport { CalendarHeaderProps } from './types';\n\ninterface MonthNameProps {\n  startWeek: Date;\n}\n\nconst MonthName: React.FunctionComponent<MonthNameProps> = ({ startWeek }) => {\n  const getMonthName = () => {\n    const endOfWeekDate = endOfWeek(startWeek);\n\n    if (getMonth(endOfWeekDate) == getMonth(startWeek)) {\n      return format(startWeek, 'MMM');\n    }\n\n    return format(startWeek, 'MMM') + '-' + format(endOfWeekDate, 'MMM');\n  };\n\n  return (\n    <div style={{ display: 'flex', maxHeight: '25px' }}>\n      <Typography.Title\n        level={5}\n        style={{ marginBottom: 0, marginRight: '10px' }}\n      >\n        {getMonthName()}\n      </Typography.Title>\n      <Tag>Week {getWeek(new Date(addWeeks(startWeek, -1)))}</Tag>\n    </div>\n  );\n};\n\nexport const CalendarHeader: React.FunctionComponent<CalendarHeaderProps> = ({\n  startWeek,\n  setStartWeek,\n}) => {\n  return (\n    <>\n      <Row justify=\"space-between\" style={{ marginBottom: '20px' }}>\n        <Col\n          style={{\n            display: 'flex',\n            justifyContent: 'space-between',\n          }}\n        >\n          <div style={{ display: 'flex', marginRight: '20px' }}>\n            <Button onClick={() => setStartWeek(startOfWeek(new Date()))}>\n              Today\n            </Button>\n            <div style={{ display: 'flex', padding: '0 10px' }}>\n              <Button\n                style={{ margin: '0 5px' }}\n                onClick={() => setStartWeek(addWeeks(startWeek, -1))}\n              >\n                <LeftOutlined />\n              </Button>\n              <Button\n                style={{ margin: '0 5px' }}\n                onClick={() => setStartWeek(addWeeks(startWeek, 1))}\n              >\n                <RightOutlined />\n              </Button>\n            </div>\n          </div>\n          <div style={{ alignSelf: 'center' }}>\n            <MonthName startWeek={startWeek} />\n          </div>\n        </Col>\n        <Col>\n          <DatePicker\n            onChange={date => {\n              if (date) {\n                setStartWeek(startOfWeek(new Date(date)));\n              }\n            }}\n            picker=\"week\"\n            defaultValue={startOfWeek(new Date())}\n          />\n        </Col>\n      </Row>\n    </>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { Card } from 'antd';\nimport { startOfWeek, endOfWeek } from 'date-fns';\n\nimport Calendar from './CalendarBody';\nimport { CalendarHeader } from './CalendarHeader';\nimport { GenericEvent, CalendarContainerProps } from './types';\nimport { daysToWeekObject } from './utils';\n\nexport function WeeklyCalendar<T extends GenericEvent>({\n  events,\n  onEventClick,\n  onSelectDate,\n  weekends = false,\n  value,\n}: CalendarContainerProps<T>) {\n  const [startWeek, setStartWeek] = useState(startOfWeek(value || new Date()));\n  const weekPeriod = {\n    startDate: startWeek,\n    endDate: endOfWeek(startWeek),\n  };\n\n  useEffect(() => {\n    if (value && startOfWeek(value).getTime() !== startWeek.getTime()) {\n      setStartWeek(value);\n    }\n  }, [value]);\n\n  useEffect(() => {\n    onSelectDate && onSelectDate(startWeek);\n  }, [startWeek]);\n\n  const weekObject = daysToWeekObject(events, startWeek);\n\n  return (\n    <Card>\n      <CalendarHeader startWeek={startWeek} setStartWeek={setStartWeek} />\n      <Calendar\n        weekDates={weekPeriod}\n        getDayEvents={weekObject}\n        onEventClick={onEventClick}\n        weekends={weekends}\n      />\n    </Card>\n  );\n}\n"],"names":["daysToWeekObject","events","startWeek","dayNames","weekObject","sunday","monday","tuesday","wednesday","thursday","friday","saturday","googleEventIndex","eventStartTimeDay","startTime","eventEndTimeDay","endTime","isSameDay","result","eachDayOfInterval","start","end","dayInterval","splitedEvent","weekObjectKey","getDay","Date","isSameWeek","push","getDayHoursEvents","value","ALL_DAY_EVENT","i","startDate","add","startOfDay","startOfWeek","days","hour","addHours","id","hourObject","format","Monday","filter","e","allDay","isSameHour","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","HOUR_TO_DECIMAL","MIN_BOX_SIZE","sizeEventBox","event","eventStartTime","eventEndTime","boxSize","Math","floor","differenceInMinutes","boxPosition","BOX_POSITION_OFFSET","SCROLL_TO_ROW","TURQUOISE","ALL_DAY_ROW","EventBlock","index","onEventClick","getEventDay","fitHourToDate","setDay","boxStyle","boxLeftPosition","React","style","display","height","width","position","top","left","borderColor","borderStyle","borderWidth","borderRadius","backgroundColor","zIndex","onClick","undefined","key","color","fontSize","paddingLeft","title","Calendar","weekDates","getDayEvents","weekends","rowRef","useRef","useEffect","current","scrollIntoView","dayList","dayColumns","map","day","counter","columnDate","formattedDayandMonth","dataIndex","render","row","length","Array","eventsBlock","eventId","props","padding","children","hourColumn","ref","tableColumns","Table","rowKey","record","dataSource","columns","pagination","bordered","showHeader","onRow","_","rowIndex","boxShadow","scroll","y","DatePicker","generatePicker","dateFnsGenerateConfig","MonthName","getMonthName","endOfWeekDate","endOfWeek","getMonth","maxHeight","Typography","Title","level","marginBottom","marginRight","Tag","getWeek","addWeeks","CalendarHeader","setStartWeek","Row","justify","Col","justifyContent","Button","margin","LeftOutlined","RightOutlined","alignSelf","onChange","date","picker","defaultValue","WeeklyCalendar","onSelectDate","useState","weekPeriod","endDate","getTime","Card"],"mappings":"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"}