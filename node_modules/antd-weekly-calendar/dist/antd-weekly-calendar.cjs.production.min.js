"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(t),a=require("antd"),r=require("date-fns"),i=require("@ant-design/icons"),l=e(require("rc-picker/lib/generate/dateFns")),d=e(require("antd/es/date-picker/generatePicker"));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}require("antd/es/date-picker/style/index");var u=function(e,t){for(var n=[],a=function(a){var i=r.add(r.startOfDay(r.startOfWeek(e.startDate)),{days:1}),l=r.addHours(i,a-1);n.push({id:a,hourObject:l,hour:0!=a?r.format(l,"hh a"):"all-day",Monday:(null==t?void 0:t.monday)&&(null==t?void 0:t.monday.filter((function(e){return e.allDay?0===a:r.isSameHour(e.startTime,l)}))),Tuesday:(null==t?void 0:t.tuesday)&&(null==t?void 0:t.tuesday.filter((function(e){return e.allDay?0===a:r.isSameHour(e.startTime,r.add(l,{days:1}))}))),Wednesday:(null==t?void 0:t.wednesday)&&(null==t?void 0:t.wednesday.filter((function(e){return e.allDay?0===a:r.isSameHour(e.startTime,r.add(l,{days:2}))}))),Thursday:(null==t?void 0:t.thursday)&&(null==t?void 0:t.thursday.filter((function(e){return e.allDay?0===a:r.isSameHour(e.startTime,r.add(l,{days:3}))}))),Friday:(null==t?void 0:t.friday)&&(null==t?void 0:t.friday.filter((function(e){return e.allDay?0===a:r.isSameHour(e.startTime,r.add(l,{days:4}))}))),Saturday:(null==t?void 0:t.saturday)&&(null==t?void 0:t.saturday.filter((function(e){return e.allDay?0===a:r.isSameHour(e.startTime,r.add(l,{days:5}))}))),Sunday:(null==t?void 0:t.sunday)&&(null==t?void 0:t.sunday.filter((function(e){return e.allDay?0===a:r.isSameHour(e.startTime,r.add(l,{days:6}))})))})},i=0;i<26;i++)a(i);return n},s=function(e){var t=e.event,a=e.index,i=e.hour,l=e.events,d=e.onEventClick,o=r.getDay(new Date(t.endTime)),u=r.setDay(i,o),s=t.allDay?{boxSize:40,boxPosition:26*a}:function(e,t){var n=new Date(e.startTime),a=new Date(e.endTime),i=Math.floor(1.666666667*r.differenceInMinutes(a,n))<40?40:Math.floor(1.666666667*r.differenceInMinutes(a,n));return{boxPosition:1.666666667*r.differenceInMinutes(t,n)>100?0:1.666666667*r.differenceInMinutes(n,t),boxSize:i}}(t,u),c=t.allDay?0:26*a;return n.createElement("div",{style:{display:t.allDay||0!==r.differenceInMinutes(new Date(t.endTime),u)?"block":"none",height:s.boxSize+"%",width:t.allDay?"80%":80/l+"%",position:"absolute",top:s.boxPosition+"%",left:c+"%",borderColor:"white",borderStyle:"solid",borderWidth:"0.01rem",borderRadius:"5px",backgroundColor:t.backgroundColor?t.backgroundColor:"#36CFC9",zIndex:1},onClick:d?function(){return d(t)}:void 0,key:a},n.createElement("p",{style:{color:"white",fontSize:"12px",paddingLeft:"5px"}},t.title))};function c(e){var i=e.weekDates,l=e.getDayEvents,d=e.onEventClick,o=e.weekends,c=t.useRef(null);t.useEffect((function(){var e;c.current&&(null==(e=c.current)||e.scrollIntoView())}),[c]);var y=(o?["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]:["Monday","Tuesday","Wednesday","Thursday","Friday"]).map((function(e,t){var a=r.add(new Date(i.startDate),{days:1+t});return{title:r.format(a,"iii")+" "+r.format(a,"dd"),dataIndex:e,key:e,width:2,render:function(e,t){if(e&&e.length>0&&e instanceof Array){var a=e.map((function(a,r){return n.createElement(s,{key:a.eventId,event:a,index:r,hour:t.hourObject,events:e.length,onEventClick:d})}));return{props:{style:{position:"relative",padding:"0"}},children:n.createElement(n.Fragment,null,a)}}}}})),f=[{title:"Hours",dataIndex:"hour",key:"hour",width:1,render:function(e,t,a){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),{props:{style:{width:"10%"}},children:n.createElement("div",19===a?{ref:c}:null,e)}}}].concat(y);return n.createElement("div",null,n.createElement(a.Table,{rowKey:function(e){return e.id},dataSource:u(i,l),columns:f,pagination:!1,bordered:!0,showHeader:!0,onRow:function(e,t){return 0===t?{style:{backgroundColor:"white",position:"sticky",boxShadow:"rgba(0, 0, 0, 0.05) -1px 4px 4px ",zIndex:1,top:0}}:{}},scroll:{y:1e3}}))}var y=d(l),f=function(e){var t,i=e.startWeek;return n.createElement("div",{style:{display:"flex",maxHeight:"25px"}},n.createElement(a.Typography.Title,{level:5,style:{marginBottom:0,marginRight:"10px"}},(t=r.endOfWeek(i),r.getMonth(t)==r.getMonth(i)?r.format(i,"MMM"):r.format(i,"MMM")+"-"+r.format(t,"MMM"))),n.createElement(a.Tag,null,"Week ",r.getWeek(new Date(r.addWeeks(i,-1)))))},m=function(e){var t=e.startWeek,l=e.setStartWeek;return n.createElement(n.Fragment,null,n.createElement(a.Row,{justify:"space-between",style:{marginBottom:"20px"}},n.createElement(a.Col,{style:{display:"flex",justifyContent:"space-between"}},n.createElement("div",{style:{display:"flex",marginRight:"20px"}},n.createElement(a.Button,{onClick:function(){return l(r.startOfWeek(new Date))}},"Today"),n.createElement("div",{style:{display:"flex",padding:"0 10px"}},n.createElement(a.Button,{style:{margin:"0 5px"},onClick:function(){return l(r.addWeeks(t,-1))}},n.createElement(i.LeftOutlined,null)),n.createElement(a.Button,{style:{margin:"0 5px"},onClick:function(){return l(r.addWeeks(t,1))}},n.createElement(i.RightOutlined,null)))),n.createElement("div",{style:{alignSelf:"center"}},n.createElement(f,{startWeek:t}))),n.createElement(a.Col,null,n.createElement(y,{onChange:function(e){e&&l(r.startOfWeek(new Date(e)))},picker:"week",defaultValue:r.startOfWeek(new Date)}))))};exports.WeeklyCalendar=function(e){var i=e.events,l=e.onEventClick,d=e.onSelectDate,u=e.weekends,s=void 0!==u&&u,y=e.value,f=t.useState(r.startOfWeek(y||new Date)),v=f[0],p=f[1],k={startDate:v,endDate:r.endOfWeek(v)};t.useEffect((function(){y&&r.startOfWeek(y).getTime()!==v.getTime()&&p(y)}),[y]),t.useEffect((function(){d&&d(v)}),[v]);var h=function(e,t){var n=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],a={sunday:[],monday:[],tuesday:[],wednesday:[],thursday:[],friday:[],saturday:[]};if(null==e)return a;for(var i in e){var l=e[i].startTime,d=e[i].endTime;if(r.isSameDay(l,d))a[n[r.getDay(l)]].push(e[i]);else{var u=r.eachDayOfInterval({start:l,end:d});for(var s in u){var c=o({},e[i]);c.startTime=u[s],c.endTime=u[s];var y=n[r.getDay(new Date(u[s]))];r.isSameWeek(t,c.startTime)&&a[y].push(c)}}}return a}(i,v);return n.createElement(a.Card,null,n.createElement(m,{startWeek:v,setStartWeek:p}),n.createElement(c,{weekDates:k,getDayEvents:h,onEventClick:l,weekends:s}))};
//# sourceMappingURL=antd-weekly-calendar.cjs.production.min.js.map
